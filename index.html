<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Airdrop Farming Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* --------- Black / Dark theme --------- */
    :root{
      --bg: #0b0d10;
      --panel: #0f1115;
      --panel-2: #111827;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
      --link: #93c5fd;
      --link-hover: #bfdbfe;
    }
    html,body { height: 100%; }
    body { background: var(--bg); color: var(--text); }
    a { color: var(--link); } a:hover { color: var(--link-hover); }

    /* --------- Centered narrow app layout --------- */
    .app-wrap { max-width: clamp(920px, 85vw, 1180px); margin: 0 auto; }
    .sticky-top-bg { background: var(--panel); box-shadow: 0 2px 16px rgba(0,0,0,.6); border: 1px solid var(--border); }
    .subhead { color: var(--muted); }

    /* --------- Table look --------- */
    .table {
      --bs-table-bg: var(--panel);
      --bs-table-color: var(--text);
      --bs-table-striped-bg: var(--panel-2);
      --bs-table-striped-color: var(--text);
      --bs-table-border-color: var(--border);
    }
    .table thead th { background: var(--panel-2); border-color: var(--border); text-align: center; }

    .project-cell a { text-decoration: underline; }
    .project-col { min-width: 220px; }
    .desc-col { width: 280px; color: var(--muted); font-size: .9rem; }
    .today-col { width: 72px; text-align: center; }
    .history-col { width: 40px; text-align: center; }

    .status-box {
      width: 26px; height: 26px; border-radius: 4px; border: 1px solid rgba(255,255,255,.06);
      display: inline-block;
    }
    .status-green { background: #21c35e; }
    .status-yellow { background: #f1c40f; }
    .status-red { background: #e74c3c; }
    .legend .status-box { width: 18px; height: 18px; vertical-align: text-bottom; }

    .note-badge { font-size: .70rem; }
    .form-check-input[readonly] { pointer-events: none; }
    .code-badge { cursor: pointer; }
    .controls .btn { margin-right: .5rem; }

    /* --------- Banner --------- */
    .banner-wrap { margin: 12px 0 10px; border-radius: 12px; overflow: hidden; border: 1px solid var(--border); background: #000; }
    .banner-wrap img { width: 100%; display: block; object-fit: cover; max-height: 140px; } /* <= smaller logo on desktop */

    /* Keep the whole block centered even when screen is wider than content */
    .table-responsive { overflow-x: auto; }
  </style>
</head>
<body>
  <div class="container-fluid py-3">
    <div class="app-wrap">

      <!-- Banner (auto-hides if banner.png missing) -->
      <div class="banner-wrap">
        <img src="banner.png" alt="Banner" onerror="this.closest('.banner-wrap').remove();">
      </div>

      <div class="d-flex align-items-center justify-content-between mb-3 sticky-top sticky-top-bg px-2 py-2 rounded-3">
        <div>
          <h1 class="h4 mb-0 text-center">Airdrop Farming Tracker</h1>
          <div class="subhead">Mode sombre ‚Ä¢ Auto-tick sur clic de lien ‚Ä¢ Confirmation manuelle du farm ‚Ä¢ Donn√©es locales</div>
        </div>
        <div class="controls">
          <button id="resetTodayBtn" class="btn btn-outline-secondary btn-sm">Reset today</button>
          <button id="resetAllBtn" class="btn btn-outline-danger btn-sm">Reset all</button>
          <button id="exportBtn" class="btn btn-outline-primary btn-sm">Export</button>
          <label class="btn btn-outline-primary btn-sm mb-0">
            Import <input id="importInput" type="file" accept="application/json" hidden>
          </label>
        </div>
      </div>

      <div class="table-responsive">
        <table id="trackerTable" class="table table-bordered table-striped align-middle mx-auto">
          <thead id="trackerHead"></thead>
          <tbody id="trackerBody"></tbody>
        </table>
      </div>

      <div class="legend mt-3">
        <span class="me-3"><span class="status-box status-red me-1"></span> No click and no farm</span>
        <span class="me-3"><span class="status-box status-yellow me-1"></span> Click but no farm confirmed</span>
        <span class="me-3"><span class="status-box status-green me-1"></span> Click and farm OK</span>
      </div>

      <div class="mt-4" style="color:var(--muted); font-size:.9rem;">
        <strong>Notes :</strong> ‚ÄúClick‚Äù se coche automatiquement lorsque vous ouvrez le lien. ‚ÄúFarm‚Äù est manuel.
        Les r√©sum√©s semaine/mois/trimestre sont d√©riv√©s des enregistrements journaliers sauvegard√©s dans votre navigateur.
      </div>
    </div>
  </div>

  <!-- Toasts -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index:1080">
    <div id="toast" class="toast align-items-center text-bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body" id="toastBody">Done</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  </div>

  <script>
    // ---------- Config ----------
    const PROJECTS = [
      { key: 'fantasyTop',   name: 'FantasyTop',           url: 'https://fantasy.top?ref=petranto12', desc: 'Fantasy trading of creators' },
      { key: 'cookieFun',    name: 'Cookie.fun',           url: 'https://www.cookie.fun/profile',     desc: 'Quests & mini-games' },
      { key: 'kaito',        name: 'Kaito (Yaps)',         url: 'https://yaps.kaito.ai/referral/1382662710396080133', desc: 'AI/social research app' },
      { key: 'galxe',        name: 'Galxe',                url: 'https://app.galxe.com/hub/invite?code=GICyJr43Nj1NJrZqi4fhOdcjt4V_avTgEEJxuu-AC0=', desc: 'Quest & airdrop hub' },
      { key: 'klout',        name: 'Klout.gg',             url: 'https://klout.gg/', desc: 'Social points tracker', referralNote: 'Referral: ‚Äúpetranto üß¨‚Äù', copyText: 'petranto üß¨' },
      { key: 'wallchain',    name: 'Wallchain (Quacks)',   url: 'https://quacks.app/?ref=PetrAnto12', desc: 'Referral/points portal' },
      { key: 'ethos',        name: 'Ethos',                url: 'https://app.ethos.network/',         desc: 'Web3 profile & quests' },
      { key: 'fundamental',  name: 'Fundamental.lol',      url: 'https://fundamental.lol/r/?node=PetrAnto12-5mu', desc: 'Onchain social hub' },
      { key: 'addicted',     name: 'Addicted.fun',         url: 'https://addicted.fun',               desc: 'Daily tasks & games', referralNote: 'Invite code', copyText: 'IHMJC4DK' },
      { key: 'addplus',      n
